{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { difference, replaceAt } from './utils';\nimport { notifyManager } from './notifyManager';\nimport { QueryObserver } from './queryObserver';\nimport { Subscribable } from './subscribable';\nexport var QueriesObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueriesObserver, _Subscribable);\n\n  function QueriesObserver(client, queries) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n    _this.queries = [];\n    _this.result = [];\n    _this.observers = [];\n    _this.observersMap = {};\n\n    if (queries) {\n      _this.setQueries(queries);\n    }\n\n    return _this;\n  }\n\n  var _proto = QueriesObserver.prototype;\n\n  _proto.onSubscribe = function onSubscribe() {\n    var _this2 = this;\n\n    if (this.listeners.length === 1) {\n      this.observers.forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this2.onUpdate(observer, result);\n        });\n      });\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      this.destroy();\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    this.listeners = [];\n    this.observers.forEach(function (observer) {\n      observer.destroy();\n    });\n  };\n\n  _proto.setQueries = function setQueries(queries, notifyOptions) {\n    this.queries = queries;\n    this.updateObservers(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.result;\n  };\n\n  _proto.getOptimisticResult = function getOptimisticResult(queries) {\n    var _this3 = this;\n\n    return queries.map(function (options) {\n      var defaultedOptions = _this3.client.defaultQueryObserverOptions(options);\n\n      return _this3.getObserver(defaultedOptions).getOptimisticResult(defaultedOptions);\n    });\n  };\n\n  _proto.getObserver = function getObserver(options) {\n    var defaultedOptions = this.client.defaultQueryObserverOptions(options);\n    return this.observersMap[defaultedOptions.queryHash] || new QueryObserver(this.client, defaultedOptions);\n  };\n\n  _proto.updateObservers = function updateObservers(notifyOptions) {\n    var _this4 = this;\n\n    notifyManager.batch(function () {\n      var hasIndexChange = false;\n      var prevObservers = _this4.observers;\n      var prevOberversMap = _this4.observersMap;\n      var newResult = [];\n      var newObservers = [];\n      var newObserversMap = {};\n\n      _this4.queries.forEach(function (options, i) {\n        var defaultedOptions = _this4.client.defaultQueryObserverOptions(options);\n\n        var queryHash = defaultedOptions.queryHash;\n\n        var observer = _this4.getObserver(defaultedOptions);\n\n        if (prevOberversMap[queryHash]) {\n          observer.setOptions(defaultedOptions, notifyOptions);\n        }\n\n        if (observer !== prevObservers[i]) {\n          hasIndexChange = true;\n        }\n\n        newObservers.push(observer);\n        newResult.push(observer.getCurrentResult());\n        newObserversMap[queryHash] = observer;\n      });\n\n      if (prevObservers.length === newObservers.length && !hasIndexChange) {\n        return;\n      }\n\n      _this4.observers = newObservers;\n      _this4.observersMap = newObserversMap;\n      _this4.result = newResult;\n\n      if (!_this4.hasListeners()) {\n        return;\n      }\n\n      difference(prevObservers, newObservers).forEach(function (observer) {\n        observer.destroy();\n      });\n      difference(newObservers, prevObservers).forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this4.onUpdate(observer, result);\n        });\n      });\n\n      _this4.notify();\n    });\n  };\n\n  _proto.onUpdate = function onUpdate(observer, result) {\n    var index = this.observers.indexOf(observer);\n\n    if (index !== -1) {\n      this.result = replaceAt(this.result, index, result);\n      this.notify();\n    }\n  };\n\n  _proto.notify = function notify() {\n    var _this5 = this;\n\n    notifyManager.batch(function () {\n      _this5.listeners.forEach(function (listener) {\n        listener(_this5.result);\n      });\n    });\n  };\n\n  return QueriesObserver;\n}(Subscribable);","map":{"version":3,"names":["_inheritsLoose","difference","replaceAt","notifyManager","QueryObserver","Subscribable","QueriesObserver","_Subscribable","client","queries","_this","call","result","observers","observersMap","setQueries","_proto","prototype","onSubscribe","_this2","listeners","length","forEach","observer","subscribe","onUpdate","onUnsubscribe","destroy","notifyOptions","updateObservers","getCurrentResult","getOptimisticResult","_this3","map","options","defaultedOptions","defaultQueryObserverOptions","getObserver","queryHash","_this4","batch","hasIndexChange","prevObservers","prevOberversMap","newResult","newObservers","newObserversMap","i","setOptions","push","hasListeners","notify","index","indexOf","_this5","listener"],"sources":["/Users/seanley/Desktop/Benchmetric/client/node_modules/react-query/es/core/queriesObserver.js"],"sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { difference, replaceAt } from './utils';\nimport { notifyManager } from './notifyManager';\nimport { QueryObserver } from './queryObserver';\nimport { Subscribable } from './subscribable';\nexport var QueriesObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueriesObserver, _Subscribable);\n\n  function QueriesObserver(client, queries) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n    _this.queries = [];\n    _this.result = [];\n    _this.observers = [];\n    _this.observersMap = {};\n\n    if (queries) {\n      _this.setQueries(queries);\n    }\n\n    return _this;\n  }\n\n  var _proto = QueriesObserver.prototype;\n\n  _proto.onSubscribe = function onSubscribe() {\n    var _this2 = this;\n\n    if (this.listeners.length === 1) {\n      this.observers.forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this2.onUpdate(observer, result);\n        });\n      });\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      this.destroy();\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    this.listeners = [];\n    this.observers.forEach(function (observer) {\n      observer.destroy();\n    });\n  };\n\n  _proto.setQueries = function setQueries(queries, notifyOptions) {\n    this.queries = queries;\n    this.updateObservers(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.result;\n  };\n\n  _proto.getOptimisticResult = function getOptimisticResult(queries) {\n    var _this3 = this;\n\n    return queries.map(function (options) {\n      var defaultedOptions = _this3.client.defaultQueryObserverOptions(options);\n\n      return _this3.getObserver(defaultedOptions).getOptimisticResult(defaultedOptions);\n    });\n  };\n\n  _proto.getObserver = function getObserver(options) {\n    var defaultedOptions = this.client.defaultQueryObserverOptions(options);\n    return this.observersMap[defaultedOptions.queryHash] || new QueryObserver(this.client, defaultedOptions);\n  };\n\n  _proto.updateObservers = function updateObservers(notifyOptions) {\n    var _this4 = this;\n\n    notifyManager.batch(function () {\n      var hasIndexChange = false;\n      var prevObservers = _this4.observers;\n      var prevOberversMap = _this4.observersMap;\n      var newResult = [];\n      var newObservers = [];\n      var newObserversMap = {};\n\n      _this4.queries.forEach(function (options, i) {\n        var defaultedOptions = _this4.client.defaultQueryObserverOptions(options);\n\n        var queryHash = defaultedOptions.queryHash;\n\n        var observer = _this4.getObserver(defaultedOptions);\n\n        if (prevOberversMap[queryHash]) {\n          observer.setOptions(defaultedOptions, notifyOptions);\n        }\n\n        if (observer !== prevObservers[i]) {\n          hasIndexChange = true;\n        }\n\n        newObservers.push(observer);\n        newResult.push(observer.getCurrentResult());\n        newObserversMap[queryHash] = observer;\n      });\n\n      if (prevObservers.length === newObservers.length && !hasIndexChange) {\n        return;\n      }\n\n      _this4.observers = newObservers;\n      _this4.observersMap = newObserversMap;\n      _this4.result = newResult;\n\n      if (!_this4.hasListeners()) {\n        return;\n      }\n\n      difference(prevObservers, newObservers).forEach(function (observer) {\n        observer.destroy();\n      });\n      difference(newObservers, prevObservers).forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this4.onUpdate(observer, result);\n        });\n      });\n\n      _this4.notify();\n    });\n  };\n\n  _proto.onUpdate = function onUpdate(observer, result) {\n    var index = this.observers.indexOf(observer);\n\n    if (index !== -1) {\n      this.result = replaceAt(this.result, index, result);\n      this.notify();\n    }\n  };\n\n  _proto.notify = function notify() {\n    var _this5 = this;\n\n    notifyManager.batch(function () {\n      _this5.listeners.forEach(function (listener) {\n        listener(_this5.result);\n      });\n    });\n  };\n\n  return QueriesObserver;\n}(Subscribable);"],"mappings":"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"},"metadata":{},"sourceType":"module"}