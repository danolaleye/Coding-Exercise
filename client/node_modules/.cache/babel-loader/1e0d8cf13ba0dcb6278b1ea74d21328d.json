{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { notifyManager } from './notifyManager';\nimport { Mutation } from './mutation';\nimport { noop } from './utils';\nimport { Subscribable } from './subscribable'; // TYPES\n// CLASS\n\nexport var MutationCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationCache, _Subscribable);\n\n  function MutationCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.mutations = [];\n    _this.mutationId = 0;\n    return _this;\n  }\n\n  var _proto = MutationCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state: state,\n      defaultOptions: options.mutationKey ? client.getMutationDefaults(options.mutationKey) : undefined\n    });\n    this.add(mutation);\n    return mutation;\n  };\n\n  _proto.add = function add(mutation) {\n    this.mutations.push(mutation);\n    this.notify(mutation);\n  };\n\n  _proto.remove = function remove(mutation) {\n    this.mutations = this.mutations.filter(function (x) {\n      return x !== mutation;\n    });\n    mutation.cancel();\n    this.notify(mutation);\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.mutations.forEach(function (mutation) {\n        _this2.remove(mutation);\n      });\n    });\n  };\n\n  _proto.getAll = function getAll() {\n    return this.mutations;\n  };\n\n  _proto.notify = function notify(mutation) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(mutation);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.resumePausedMutations();\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.resumePausedMutations();\n  };\n\n  _proto.resumePausedMutations = function resumePausedMutations() {\n    var pausedMutations = this.mutations.filter(function (x) {\n      return x.state.isPaused;\n    });\n    return notifyManager.batch(function () {\n      return pausedMutations.reduce(function (promise, mutation) {\n        return promise.then(function () {\n          return mutation.continue().catch(noop);\n        });\n      }, Promise.resolve());\n    });\n  };\n\n  return MutationCache;\n}(Subscribable);","map":{"version":3,"names":["_inheritsLoose","notifyManager","Mutation","noop","Subscribable","MutationCache","_Subscribable","config","_this","call","mutations","mutationId","_proto","prototype","build","client","options","state","mutation","mutationCache","defaultMutationOptions","defaultOptions","mutationKey","getMutationDefaults","undefined","add","push","notify","remove","filter","x","cancel","clear","_this2","batch","forEach","getAll","_this3","listeners","listener","onFocus","resumePausedMutations","onOnline","pausedMutations","isPaused","reduce","promise","then","continue","catch","Promise","resolve"],"sources":["/Users/seanley/Desktop/Benchmetric/client/node_modules/react-query/es/core/mutationCache.js"],"sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { notifyManager } from './notifyManager';\nimport { Mutation } from './mutation';\nimport { noop } from './utils';\nimport { Subscribable } from './subscribable'; // TYPES\n\n// CLASS\nexport var MutationCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationCache, _Subscribable);\n\n  function MutationCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.mutations = [];\n    _this.mutationId = 0;\n    return _this;\n  }\n\n  var _proto = MutationCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state: state,\n      defaultOptions: options.mutationKey ? client.getMutationDefaults(options.mutationKey) : undefined\n    });\n    this.add(mutation);\n    return mutation;\n  };\n\n  _proto.add = function add(mutation) {\n    this.mutations.push(mutation);\n    this.notify(mutation);\n  };\n\n  _proto.remove = function remove(mutation) {\n    this.mutations = this.mutations.filter(function (x) {\n      return x !== mutation;\n    });\n    mutation.cancel();\n    this.notify(mutation);\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.mutations.forEach(function (mutation) {\n        _this2.remove(mutation);\n      });\n    });\n  };\n\n  _proto.getAll = function getAll() {\n    return this.mutations;\n  };\n\n  _proto.notify = function notify(mutation) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(mutation);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.resumePausedMutations();\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.resumePausedMutations();\n  };\n\n  _proto.resumePausedMutations = function resumePausedMutations() {\n    var pausedMutations = this.mutations.filter(function (x) {\n      return x.state.isPaused;\n    });\n    return notifyManager.batch(function () {\n      return pausedMutations.reduce(function (promise, mutation) {\n        return promise.then(function () {\n          return mutation.continue().catch(noop);\n        });\n      }, Promise.resolve());\n    });\n  };\n\n  return MutationCache;\n}(Subscribable);"],"mappings":"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"},"metadata":{},"sourceType":"module"}